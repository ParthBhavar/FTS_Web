@model FTS.Model.Entities.ApplicantMasterModel
@{
    ViewBag.Title = "User Registration";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

@*<link rel="stylesheet" href="~/Content/jquery-ui.css" />
<script src="~/Scripts/jquery-1.10.2.js"></scrip*@



<div class="body">
  
    <div class="main-wrapper py-5">
            <div class="container-fluid">
                <!-- ser-reg-sec start -->
                 @Html.AntiForgeryToken()
                <div class="content-box reg-box">
                    <div >
                          <img src="~/images/govtlogo.png" class="rounded mx-auto d-block pt-3" alt="logo">

                         <div class="content-header py-1">
                        <h3 class="text-center text-white mt-3" ><i class="fas fa-user mr-2"></i>
                            Online Registration
                        </h3>
                        </div> 
                    </div>

             
                         
                            <div class="content-body">

                                <div asp-validation-summary="ModelOnly" class="text-danger"></div>
                                <form asp-controller="UserRegistration" asp-action="Index" asp-antiforgery="true" method="post">
                                 
                                                            @*First Name Middle Name*@

                                <div class="form-group">                            
                                    
                                     <div class="row col-md-12">
                                         
                                         <div class="col-md-4">
                                             <label for="inputFirstName" class="col-form-label">                                       
                                               <span id="labelFirstName">FirstName</span><span class="text-danger">*</span>
                                             </label>
                                             @Html.TextBoxFor(e =>e.FirstName, new { @class = "form-control",@ID="FirstName", placeholder = "Enter First Name", onkeypress = "return allowOnlyLetters(event,this);" })
                                             <span class="text-danger ValidationSpan" id="Spanvalidfirstname" style="display:none;">Plese Enter Valid FirstName</span>
                                              <span class="text-danger ValidationSpan" id="SpanFirstName" style="display:none;">Plese Enter FirstName</span>                              
                                         </div>

                                         <div class="col-md-4">
                                             <label for="inputMiddleName" class="col-form-label">                                        
                                                <span id="labelMiddleName">MiddleName</span><span class="text-danger">*</span>
                                             </label>
                                             @Html.TextBoxFor(e =>e.MiddleName, new { @class = "form-control",@ID="MiddleName", placeholder = "Enter Middle Name", onkeypress = "return allowOnlyLetters(event,this);"})
                                              <span class="text-danger ValidationSpan" id="Spanvalidmiddlename" style="display:none;">Plese Enter Valid Mobile Number</span>
                                               <span class="text-danger ValidationSpan" id="SpanMiddleName" style="display:none;">Plese Enter MiddleName</span>
                                     
                                         </div>   
                                         
                                          <div class="col-md-4">
                                             <label for="inputLastName" class="col-form-label">                                      
                                                <span id="labelLastName">LastName</span><span class="text-danger">*</span>
                                             </label>
                                             @Html.TextBoxFor(e =>e.LastName, new { @class = "form-control",@ID="LastName", placeholder = "Enter Last Name", onkeypress = "return allowOnlyLetters(event,this);" })
                                            <span class="text-danger ValidationSpan" id="Spanvalidlastname" style="display:none;">Plese Enter Valid Mobile Number</span>
                                             <span class="text-danger ValidationSpan" id="SpanLastName" style="display:none;">Plese Enter LastName</span>
                                      
                                         </div>
                                      </div>
                                 </div>
                                                    @*Last Name Mobile No*@

                                 <div class="form-group">                                  
                                     <div class="row col-md-12">
                                         <div class="col-md-6">
                                             <label for="inputMobile" class="col-form-label">    
                                            
                                               <span id="labelMobile">Mobile</span><span class="text-danger">*</span>
                                             </label>
                                             @Html.TextBoxFor(e =>e.MobileNo, new { @class = "form-control",@ID="MobileNo", placeholder = "Enter Mobile Number" , maxlength="12",oninput="numberOnly(this.id);" })
                                              <span class="text-danger ValidationSpan" id="Spanvalidmobileno" style="display:none;">Plese Enter Valid Mobile Number</span>
                                               <span class="text-danger ValidationSpan" id="SpanMobileNo" style="display:none;">Plese Enter MobileNo</span>
                                         </div>   
                                         
                                          <div class="col-md-6">
                                             <label for="inputEmail" class="col-form-label">
                                                 <span id="lblEmail">Email</span><span class="text-danger">*</span>
                                             </label>
                                             @Html.TextBoxFor(e =>e.EmailID, new { @class = "form-control", @type = "email",@ID="EmailID", @placeholder = "Enter Email Address" })
                                             @Html.HiddenFor(e => e.ApplicantOTP , new { @ID="ApplicantOTP"})
                                             <span class="text-danger ValidationSpan" id="Spanvalidemail" style="display:none;">Plese Enter Valid Email.</span>
                                              <span class="text-danger ValidationSpan" id="SpanEmailAddress" style="display:none;">Plese Enter Email</span>
                                         </div>   
                                      </div>
                                 </div>
                                                             @*EmailID Password *@

                                 <div class="form-group">                                                              
                                     <div class="row col-md-12">
                                         <div class="col-md-6">
                                             <label for="inputpassword" class="col-form-label">
                                               <span id="lblPassword">Password</span><span class="text-danger">* </span>
                                             </label>                                       
                                              @Html.TextBoxFor(e =>e.Password, new { @class = "form-control tooltip-1", type = "password",@ID="Password", placeholder = "Enter Password" , title="Must contain at least one number , one uppercase , one lowercase letter, one Special Character, and at least 8 or more characters" }) 
                                              @Html.ValidationMessageFor(m=>m.Password,null,new{@class="text-danger"})
                                              <i id="togglePassword" class="fa fa-eye"></i>
                                               <span class="text-danger ValidationSpan" id="Spanvalidpassword" style="display:none;">Plese Enter Valid Password.</span>
                                                <span class="text-danger ValidationSpan" id="SpanPassword" style="display:none;">Plese Enter Password</span>
                                         </div>   
                                          <div class="col-md-6">
                                             <label for="inputpassword" class="col-form-label">
                                                <span>Confirm password</span><span class="text-danger">*</span>                                        
                                             </label>
                                             @Html.TextBoxFor(e =>e.CPassword, new { @class = "form-control", type = "password",@ID="CPassword", placeholder = "Enter Confirm Password" ,title="Must contain at least one number , one uppercase , one lowercase letter, one Special Character, and at least 8 or more characters"})
                                             @Html.ValidationMessageFor(m=>m.CPassword,null,new{@class="text-danger"})
                                             <i id="ConfirmPassword" class="fa fa-eye"></i>
                                             <span class="text-danger ValidationSpan" id="SpanCPassword" style="display:none;">Please Enter Passoword.</span>
                                             <span class="text-danger ValidationSpan" id="SpanmatchPassword" style="display:none;">Password does not match.</span>
                                         </div>
                                      </div>
                                 </div>

                                                                @*ConfirmPassword Captcha *@
                                 <div class="form-group row">                                                                    
                                     
                                             <dnt-captcha asp-captcha-generator-max="999999"
                                                 asp-captcha-generator-min="111111"
                                                 asp-captcha-generator-language="English"
                                                 asp-captcha-generator-display-mode="ShowDigits"
                                                 asp-use-relative-urls="true"
                                                 asp-placeholder="Enter Security code"
                                                 asp-validation-error-message="Please enter the security code."
                                                 asp-font-name="Tahoma"
                                                 asp-font-size="20"
                                                 asp-fore-color="#333333"
                                                 asp-back-color="#ccc"
                                                 asp-text-box-class="text-box form-control"
                                                 asp-text-box-template="<span class='input-group-prepend'><span class='form-group-text row'></span></span>{0}"
                                                 asp-validation-message-class="text-danger"
                                                 asp-refresh-button-class="fas fa-redo btn-sm"
                                                 asp-use-noise="false" />                         
                                     
                                 </div>                    
                                                                 @*SAVE CANCEL RESET BTN *@
                                <div class="form-group">
                                    <div class="d-md-flex d-block">
                                         <button type="button" id="btnsubmit" class="btn btn-primary  btn-block" onclick="SubmitApplicantMaster()">  Register </button>
                                       @*  <a id="btnReset" class="btn btn-primary w-50 w-md-auto mb-md-0"><i class="fas fa-redo"></i> Reset</a>*@
                                     </div>
                                </div>
                                </form>  
                             </div>

                                                                         
                 </div>                                                 
             </div>                             
	</div>               
</div>
            
   
<style>
   body {
    position: relative;
    font-family: 'Nunito', sans-serif;
    color: #333;
    background-color: #eeeeee;
    font-weight: 400;
}
.container-fluid, .container-lg, .container-md, .container-sm, .container-xl {
    width: 100%;
    padding-right: 15px;
    padding-left: 15px;
    margin-right: auto;
    margin-left: auto;
}
.content-box {
    background: #fff;
    border-radius: 1.5rem;
    -moz-box-shadow: 0px 2px 15px rgba(0, 0, 0, 0.2);
    -webkit-box-shadow: 0px 2px 15px rgb(0 0 0 / 20%);
    box-shadow: 0px 2px 15pxrgb(0 0 0 / 20%);
    overflow: hidden;
    height: 100%;
}
.reg-box {
    max-width: 620px;
    margin: 0 auto;
    width: 100%;
    height: auto !important;
}
.content-header {
    background: #022d62 !important;
    color: #ffffff;
    padding: 5px 2px;
        margin-top: 15px;
}
.content-body {
    padding: 20px;
    font-size: 1rem;
    line-height: 1.4;
}
.form-group{
     width: 100%;
}
.form-control {
    display: block;
    width: 100%;
    height: calc(1.5em + 0.75rem + 2px);
    padding: 0.375rem 0.75rem;
    font-size: 1rem;
    font-weight: 400;
    line-height: 1.5;
    color: #495057;
    background-color: #fff;
    background-clip: padding-box;
    border: 1px solid #ced4da;
    border-radius: 0.25rem;
    transition: border-color .15s ease-in-out,box-shadow .15s ease-in-out;
}
.content-body .col-form-label {
    font-weight: 600;
    padding-top: 0;
}
.col-form-label {
    padding-top: calc(0.375rem + 1px);
    padding-bottom: calc(0.375rem + 1px);
    margin-bottom: 0;
    font-size: inherit;
    line-height: 1.5;
}
.btn-primary {
    background: #ef3139;
    border-color: #ef3139;
}
.btn-primary::hover{
    background: #0a73aa;
    border-color: #0a73aa;
}
#togglePassword {
    float: right;
    top: -25px;
    right: 10px;
    position: relative;
    cursor: pointer;
}  
#ConfirmPassword {
    float: right;
    top: -25px;
    right: 10px;
    position: relative;
    cursor: pointer;
}  

</style>

<script src="~/Scripts/js/Crypto-sha1.js"></script>
<script src="~/Scripts/js/GetSHACode.js"></script>

<script>  
$(function() {  
$(".tooltip-1").tooltip();  
});  
</script>  



<script>

function SubmitApplicantMaster() {
    debugger;
    var ErrorCnt = 0;
    var regEx = /^\d{10}$/;
    var mailregEx = /^\b[A-Z0-9._%-]+@@[A-Z0-9.-]+\.[A-Z]{2,4}\b$/i
    var email = $("#EmailID").val();
    var passwordregEx = /^(?=\S*[a-z])(?=\S*[A-Z])(?=\S*\d)(?=\S*[^\w\s])\S{8,}$/;
    var lowerCaseLettersregEx = /[a-z]/g;
    var upperCaseLetters = /[A-Z]/g;
    var numbers = /[0-9]/g;
    var mobileno = $("#MobileNo").val();
    var Password = $("#Password").val();
    var CPassword = $("#CPassword").val();
    $('.ValidationSpan').hide();
    

        if ($("#FirstName").val() == "0" || $("#FirstName").val() == "") {
            ErrorCnt++;
            $('#SpanFirstName').show();
        }

        if ($("#MiddleName").val() == "0" || $("#MiddleName").val() == "") {
            ErrorCnt++;
            $('#SpanMiddleName').show();
        }

        if ($("#LastName").val() == "0" || $("#LastName").val() == "") {
            ErrorCnt++;
            $('#SpanLastName').show();
        }

        if ($("#MobileNo").val() == "0" || $("#MobileNo").val() == "") {
                ErrorCnt++;
                $('#SpanMobileNo').show();
            }
     
        if ($("#EmailID").val() == "0" || $("#EmailID").val() == "") {
            ErrorCnt++;
            $('#SpanEmailAddress').show();
        }
      
         if ($("#Password").val() == "0" || $("#Password").val() == "") {
                        ErrorCnt++;
                        $('#SpanPassword').show();
         }
         if ($("#CPassword").val() == "0" || $("#CPassword").val() == "") {
                        ErrorCnt++;
                        $('#SpanCPassword').show();
         }
            
          if ($("#Password").val() != $("#CPassword").val()) {
                ErrorCnt++;
                $('#SpanmatchPassword').show();
            }

            if (ErrorCnt > 0) {
                return false;
            }



            if (ErrorCnt == 0) {
               var password = $("#Password").val(PWD($("#Password").val()));
                var myData = {
                  
                     FirstName: $('#FirstName').val(),
                     MiddleName: $('#MiddleName').val(),
                     LastName: $('#LastName').val(),
                     MobileNo: $('#MobileNo').val(),
                     EmailID: $('#EmailID').val(),
                     ApplicantOTP: $('#ApplicantOTP').val(),
                     ////Password: $('#Password').val(),
                     Password: password.val(),
                };


        
                $.ajax
                    ({
                        type: "POST",
                        url: "/UserRegistration/SaveUserRegisterRecord",
                        headers: {"XSRF-TOKEN": document.getElementsByName("__RequestVerificationToken")[0].value},
                        dataType: "json",
                        data: myData,
                        success: function(data) 
                        {
                            debugger;
                                   if (data.data.ErrorCode == 0) 
                                   {                     
                                         var ErrorCnt = 0;
                                        if (ErrorCnt == 0)
                                        {
                                            var myData = {
                                                //EmailID: $('#EmailID').val(),                 
                                                EmailID: data.data.EmailID,                 
                                                Title: "Verified Email for COL Registratation",
                                                Body:  $('#ApplicantOTP').val(),                
                                 
                                            };
                                            $.ajax
                                                ({
                                                    type: "POST",
                                                    url: "/UserRegistration/SendMailApplicant",
                                                    headers: {"XSRF-TOKEN": document.getElementsByName("__RequestVerificationToken")[0].value},
                                                    dataType: "json",
                                                    data: myData,
                                                    success: function(data) {
                                                        debugger;
                           
                                                        var Querystring = "ID=" + data.data.EmailID;
                                                             //swal({
                                                             //       title: "Congratulation!",
                                                             //       text: data.data.ErrorMassage ,
                                                             //       type: "success",
                                                             //       confirmButtonText: "OK"
                                                             //},)
                                                             //       .then((value) => {
                                                             //           location.reload();
                                                             //       });
                                                            window.location.href = "/UserRegistration/VerifyOTP?" + Querystring;
                          
                                                    },

                                                     error: function (request, message, error) 
                                                     {
                                                        debugger; 
                                                       alert(request.responseJSON);
                                                      }
                                                })
                                         }
                                   }
                                   else
                                   {
                                                    alert(data.data.ErrorMassage);
                                   }
                         
                            //if (data.data.ErrorCode == 0) {
                                
                            //     //SendMailApplicant();
                            //    //swal({
                            //    //    title: "Congratulation insert!",
                            //    //    text: data.data.ErrorMassage,
                            //    //    type: "success",
                            //    //    confirmButtonText: "OK"
                            //    //})
                            //    //   .then((value) => {
                            //    //       window.location.href = "/Home/Index";
                            //    //});
                            //    // swal(data.data.ErrorMassage)
                            //    //.then((value) => {
                            //    //    window.location.href = "/Home/Index";
                            //    //});
                            //}
                            //else {
                            //   //swal({
                            //   //          title: "Congratulation update!",
                            //   //         text: data.data.ErrorMassage,
                            //   //         type: "error",
                            //   //         confirmButtonText: "OK"
                            //   //   })
                            //   //   .then((value) => {
                            //   //        window.location.href = "/Home/Index";
                            //   // });

                            //     alert(data.data.ErrorMassage);
                            //    //window.location.href = "/Home/Index";
                            //}
                        },

                        error: function (request, message, error) 
                        {
                            debugger; 
                            alert(request.responseJSON);
                          }
                    });
              }
            
    }



    function SendMailApplicant() {
      
            debugger;
             var ErrorCnt = 0;
            if (ErrorCnt == 0) {
                var myData = {
                    EmailID: $('#EmailID').val(),                 
                    Title: "Verified Email for COL Registratation",
                    Body:  $('#ApplicantOTP').val(),                
                };
                $.ajax
                    ({
                        type: "POST",
                        url: "/UserRegistration/SendMailApplicant",
                        headers: {"XSRF-TOKEN": document.getElementsByName("__RequestVerificationToken")[0].value},
                        dataType: "json",
                        data: myData,
                        success: function(data) {
                            debugger;
                            

                           
                            var Querystring = "ID=" + data.data.EncrptmailID;
                                 //swal({
                                 //       title: "Congratulation!",
                                 //       text: data.data.ErrorMassage ,
                                 //       type: "success",
                                 //       confirmButtonText: "OK"
                                 //},)
                                 //       .then((value) => {
                                 //           location.reload();
                                 //       });
                                window.location.href = "/UserRegistration/VerifyOTP?" + Querystring;
                          
                        },

                         error: function (request, message, error) 
                         {
                            debugger; 
                           alert(request.responseJSON);
                          }
                    })
            }
    }

  function numberOnly(id) {
    var element = document.getElementById(id);
    element.value = element.value.replace(/[^0-9]/gi, "");
    }

     function allowOnlyLetters(e, t)
     {
        var regex = new RegExp("^[a-zA-Z ]+$");
        var key = String.fromCharCode(!event.charCode ? event.which : event.charCode);
        if (!regex.test(key))
         {
            event.preventDefault();
            return false;
         }
    }
</script>
 <script type="text/javascript">
    //var togglePassword = document.querySelector('#togglePassword');
    //var password = document.querySelector('#Password');
    //togglePassword.addEventListener('click', function(e) {
    //    debugger;
    //    const type = document.getElementById('Password') === 'password' ? 'text' : 'password';
        
    //    password.setAttribute('type', type);
    //    this.classList.toggle('fa-eye-slash');
    //});
</script>
  

 <script type="text/javascript">
    //var toggleconfirmpassword = document.querySelector('#ConfirmPassword');
    //var password = document.querySelector('#CPassword');
    //toggleconfirmpassword.addEventListener('click', function(e) {
    //    const type = document.getElementById('CPassword') === 'password' ? 'text' : 'password';
        
    //    password.setAttribute('type', type);
    //    this.classList.toggle('fa-eye-slash');
    //});
</script>

<script>
   $('#Password').keyup(function() {
      
       var passwordformat = /^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[@@$!%*?&])[A-Za-z\d@@$!%*?&]{6,20}$/;
       var password = $(this).val();
       if (!password.match(passwordformat))
          {
             $('#Spanvalidpassword').show();
          }
       else
          {
              $('#Spanvalidpassword').hide();
          }
   });

   $('#MobileNo').keyup(function() {
      
       var Mobileformat = /^\d{10}$/;
       var mobileno = $(this).val();
       if (!mobileno.match(Mobileformat))
          {
             $('#Spanvalidmobileno').show();  
          }
       else
          {
              $('#Spanvalidmobileno').hide();
          }
   });
   
   $('#EmailID').keyup(function() {
       
       var mailformat = /^([A-Za-z0-9_\-\.])+\@@([A-Za-z0-9_\-\.])+\.([A-Za-z]{2,4})$/;
       var email = $(this).val();
       if (!email.match(mailformat))
          {
             $('#Spanvalidemail').show();  
          }
       else
          {
              $('#Spanvalidemail').hide();
          }
   });
   //$('#FirstName').keyup(function() {
   //    debugger;
   //    var Firstnameformat = /^[a-zA-Z '.-]*$/;
   //    var email = $(this).val();
   //    if (!email.match(Firstnameformat))
   //       {
   //          $('#Spanvalidemail').show();  
   //       }
   //    else
   //       {
   //           $('#Spanvalidemail').hide();
   //       }
   //});
   //$('#MiddleName').keyup(function() {
   //    debugger;
   //    var Middelnameformat = /^[a-zA-Z '.-]*$/;
   //    var middlename = $(this).val();
   //    if (!middlename.match(Middelnameformat))
   //       {
   //          $('#Spanvalidmiddlename').show();  
   //       }
   //    else
   //       {
   //           $('#Spanvalidmiddlename').hide();
   //       }
   //});
   //$('#LastName').keyup(function() {
   //    debugger;
   //    var Lastnameformat = /^[a-zA-Z '.-]*$/;
   //    var lastname = $(this).val();
   //    if (!lastname.match(Lastnameformat))
   //       {
   //          $('#Spanvalidlastname').show();  
   //       }
   //    else
   //       {
   //           $('#Spanvalidlastname').hide();
   //       }
   //});

   $(function(){
  
  $('#togglePassword').click(function(){
      debugger;
        if($(this).hasClass('fa-eye-slash')){
           
          $(this).removeClass('fa-eye-slash');
          
          $(this).addClass('fa-eye');
          
          $('#Password').attr('type','text');
            
        }else{
         
          $(this).removeClass('fa-eye');
          
          $(this).addClass('fa-eye-slash');  
          
          $('#Password').attr('type','password');
        }
    });

     $('#ConfirmPassword').click(function(){
      debugger;
        if($(this).hasClass('fa-eye-slash')){
           
          $(this).removeClass('fa-eye-slash');
          
          $(this).addClass('fa-eye');
          
          $('#CPassword').attr('type','text');
            
        }else{
         
          $(this).removeClass('fa-eye');
          
          $(this).addClass('fa-eye-slash');  
          
          $('#CPassword').attr('type','password');
        }
    });
});
</script>
